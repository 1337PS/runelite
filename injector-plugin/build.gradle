group = 'net.runelite.rs'
description = 'Injector'
dependencies {
  compile project(':deobfuscator')
  compile project(':mixins')
  compile project(':runelite-api')
  compile project(':runescape-api')
    compile group: 'org.apache.maven', name: 'maven-plugin-api', version:'3.6.1'
  testCompile project(':deobfuscator')
    testCompile group: 'junit', name: 'junit', version:'4.12'
    testCompile group: 'org.mockito', name: 'mockito-all', version:'1.10.19'
    compileOnly group: 'org.apache.maven.plugin-tools', name: 'maven-plugin-annotations', version:'3.6.0'
    annotationProcessor group: 'org.eclipse.sisu', name: 'org.eclipse.sisu.inject', version: '0.0.0.M2a'
}

task inject(type:JavaExec) {
  classpath = sourceSets.main.runtimeClasspath

  main = "net.runelite.injector.Injector"
  args('../runescape-client/build/libs/rs-client-1.5.30-SNAPSHOT.jar,./vanilla-181.jar,../injected-client/build/libs/injected-client-1.5.30-SNAPSHOT.jar'.split(','))
}

compileJava.doLast {
  tasks.inject.execute()
}