
description = 'Script Assembler Plugin'
dependencies {
  compile project(':cache')
  compile project(':runelite-api')
    compile group: 'org.apache.maven', name: 'maven-plugin-api', version:'3.6.1'
    compileOnly group: 'org.apache.maven.plugin-tools', name: 'maven-plugin-annotations', version:'3.6.0'
}

task assembleMojo(type:JavaExec) {
  classpath = sourceSets.main.runtimeClasspath

  main = "net.runelite.script.AssembleMojo"
  args('../runelite-client/src/main/scripts,../runelite-client/build/classes/runelite'.split(','))
}

task indexMojo(type:JavaExec) {
  classpath = sourceSets.main.runtimeClasspath

  main = "net.runelite.script.IndexMojo"
  args('../runelite-client/build/classes/runelite,../runelite-client/build/classes/runelite/index'.split(','))
}

compileJava.doLast {
  tasks.assembleMojo.execute()
  tasks.indexMojo.execute()
}
