
description = 'Script Assembler Plugin'
dependencies {
  compile project(':cache')
  compile project(':runelite-api')
    compile group: 'org.apache.maven', name: 'maven-plugin-api', version:'3.6.1'
    compile group: 'org.slf4j', name: 'slf4j-nop', version: '1.7.25'
    compileOnly group: 'org.apache.maven.plugin-tools', name: 'maven-plugin-annotations', version:'3.6.0'
    annotationProcessor group: 'org.eclipse.sisu', name: 'org.eclipse.sisu.inject', version: '0.0.0.M2a'
}

task assembleMojo(type:JavaExec) {
  classpath = sourceSets.main.runtimeClasspath

  main = "net.runelite.script.AssembleMojo"
  args('../runelite-client/src/main/scripts,../runelite-client/src/main/resources/runelite'.split(','))
}

task indexMojo(type:JavaExec) {
  classpath = sourceSets.main.runtimeClasspath

  main = "net.runelite.script.IndexMojo"
  args('../runelite-client/src/main/resources/runelite,../runelite-client/src/main/resources/runelite/index'.split(','))
}

compileJava.doLast {
  tasks.assembleMojo.execute()
  tasks.indexMojo.execute()
}
